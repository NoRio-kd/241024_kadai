<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>myMemoPad</title>
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
</head>
<body>
<header>
<h1>MemoPad</h1>
</header>
<main style="display: none">
    <input id="key" type="text">
    <textarea id="text_area"></textarea>
    <ul>
        <li id="save">Save</li>
        <li id="clear">Clear</li>
    </ul>
</main>
<table id="list">
<!-- ã“ã“ã«è¿½åŠ ãƒ‡ãƒ¼ã‚¿ãŒæŒ¿å…¥ã•ã‚Œã‚‹ -->
</table>
<script>
// key, memo, save, clear
// ã‚»ãƒ¬ã‚¯ã‚¿â‡¨ãƒ¡ã‚½ãƒƒãƒ‰â‡¨ã‚¤ãƒ™ãƒ³ãƒˆ ä½•ã«å¯¾ã—ã¦â‡¨ã©ã®ã‚ˆã†ãªã“ã¨ã‚’â‡¨ã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§
// $("#email").html("htmlã‚„æ–‡å­—åˆ—")
// $("#email").on("click",function(){ 
//     $("#email").html("htmlã‚„æ–‡å­—åˆ—");
// })

$("main").slideDown(1000);
//1.Save ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
$("#save").on("click",function(){
    const key= $("#key").val();            //id"key"ã‹ã‚‰å€¤ã‚’å–å¾—ã€€valã¯valueã®æ„å‘³ã€‚ğŸ‘€htmlã ã¨å–ã‚Œãªã„ã‹ã‚‰æ³¨æ„
    const value= $("#text_area").val();      //id"memo"ã‹ã‚‰å€¤ã‚’å–å¾—ã€€valã¯valueã®æ„å‘³ã€‚ğŸ‘€htmlã ã¨å–ã‚Œãªã„ã‹ã‚‰æ³¨æ„
    localStorage.setItem(key,value);    //keyã¨value
    const html ='<tr><td>'+key+'</td><td>'+value+'</td><td><li class="delete" data-value='+key+' onclick="lidelete(this)">å‰Šé™¤</li></td></tr>';  //listã®class deletã§ã‚„ã‚‹ã€‚inputã¨ã‹ã¯valueå±æ€§ã‚’ä»˜ä¸ã§ããªã‹ã£ãŸã€‚å‘ªæ–‡ã€Œã‚·ãƒ³ã‚°ãƒ«2å›ãƒ—ãƒ©ã‚¹2å›ã€ 
    $("#list").append(html);            //lineã¿ãŸã„ã«å‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ®‹ã—ã¦å·®ã—è¾¼ã‚“ã§ã„ãã‚¤ãƒ¡ãƒ¼ã‚¸
    $("#key").val("");  //å…¥åŠ›ã—ã¦ã‚‹ã¨ã“ã‚ã‚’ã‹ã‚‰ã«ã™ã‚‹
    $("#text_area").val(""); //å…¥åŠ›ã—ã¦ã‚‹ã¨ã“ã‚ã‚’ã‹ã‚‰ã«ã™ã‚‹
    alert("Saved")
});


//2.clear ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
$("#clear").on("click",function(){
    // localStorage.clear();   //å…¨æ¶ˆã—
    const checkbox =  $("#key").val();
    localStorage.removeItem(); //ä¸€åˆ—æ¶ˆã—ã€‚ã“ã“ç©ºç™½ã§ã‚ã£ã¦ã‚‹ã‚ˆã­ã€‚
    // console.log(checkbox);
    
    // $('#list').empty();     //#listã®ä¸­ã ã‘å‰Šé™¤ 
    $("#text_area").val("å‰Šé™¤æ¸ˆã¿");   //æœ¬æ¥ã¯""ã«ã—ã¦ç©ºã«ã™ã‚‹
    alert("Deleted");
});

// $(document).on("click",".delete",function(){
//     const listvalue = $(".delete");
//     // const delete =
//     console.log(listvalue)
   
// });

function lidelete(el){
    const out_value = $(el).data('value');  //data-valueã‚’æ’®ã£ã¦ãã‚‹
    console.log(out_value)
    localStorage.removeItem(out_value); //ä¸€åˆ—æ¶ˆã—
    console.log("aa");
    // $('#list').empty();     //#listã®ä¸­ã ã‘å‰Šé™¤ 
    $("#text_area").val("å‰Šé™¤æ¸ˆã¿");   //æœ¬æ¥ã¯""ã«ã—ã¦ç©ºã«ã™ã‚‹
    alert("Deleted");
    $('#list').empty();     //å…¨ä½“å‰Šé™¤
    for(let i = 0; i<localStorage.length; i++){     //foræ–‡ã§å‰Šé™¤ã—ãŸã„å ´æ‰€ä»¥å¤–ã‚’å†è¡¨ç¤ºã™ã‚‹ã€‚
    const key = localStorage.key(i);
    const value = localStorage.getItem(key);
    const html = '<tr><th>'+key+'</th><td>'+value+'</td><td><li class="delete" data-value='+key+' onclick="lidelete(this)">å‰Šé™¤</li></td></tr>';
    $("#list").append(html);
}
}


// //2.clear ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
// $(".delete").on("click",function(){
//     // const key= $("#key").val();   
//     // localStorage.clear();   //å…¨æ¶ˆã—
//     // localStorage.removeItem(key,); //ä¸€åˆ—æ¶ˆã—
//     console.log("aa");
    
//     // $('#list').empty();     //#listã®ä¸­ã ã‘å‰Šé™¤ 
//     $("#text_area").val("å‰Šé™¤æ¸ˆã¿");   //æœ¬æ¥ã¯""ã«ã—ã¦ç©ºã«ã™ã‚‹
//     alert("Deleted");
// });



//3.ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ï¼šä¿å­˜ãƒ‡ãƒ¼ã‚¿å–å¾—è¡¨ç¤º
for(let i = 0; i<localStorage.length; i++){
    const key = localStorage.key(i);
    const value = localStorage.getItem(key);
    const html = '<tr><th>'+key+'</th><td>'+value+'</td><td><li class="delete" data-value='+key+' onclick="lidelete(this)">å‰Šé™¤</li></td></tr>';
    $("#list").append(html);
}




</script>
<footer><small>G's</small></footer>
</body>
</html>